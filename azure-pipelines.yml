# Azure DevOps Pipeline pour la vÃ©rification des namespaces
# Ajouter cette configuration Ã  votre azure-pipelines.yml existant

trigger:
  branches:
    include:
    - main
    - develop
  paths:
    include:
    - 'shared/Audio/**/*.h'
    - 'shared/Audio/**/*.cpp'
    - 'scripts/verify_namespaces.sh'

stages:
- stage: Verify
  displayName: "ğŸ” VÃ©rifier les Namespaces"
  jobs:
  - job: NamespaceVerification
    displayName: "VÃ©rification des Namespaces"
    pool:
      vmImage: 'ubuntu-latest'

    steps:
    - task: Bash@3
      displayName: "ğŸ› ï¸ Rendre le script exÃ©cutable"
      inputs:
        targetType: 'inline'
        script: 'chmod +x scripts/verify_namespaces.sh'

    - task: Bash@3
      displayName: "ğŸ” VÃ©rifier les namespaces"
      inputs:
        targetType: 'inline'
        script: './scripts/verify_namespaces.sh'
      continueOnError: false

    - task: PublishBuildArtifacts@1
      displayName: "ğŸ“Š Publier les rÃ©sultats"
      condition: always()
      inputs:
        pathToPublish: 'scripts/'
        artifactName: 'namespace-verification-results'
